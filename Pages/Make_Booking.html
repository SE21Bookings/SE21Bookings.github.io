<!doctype html>
<html>
	<head>
		<title>SE21 Make Bookings</title>
		<link rel="stylesheet" href="../CSS/MAIN.css">
		<link rel="stylesheet" href="../CSS/bootstrap.css">
		<script src="../JS/jquery.js" type="text/javascript" charset="utf-8"></script>
		<script src="../JS/MAIN.js" type="text/javascript" charset="utf-8"></script>
		<script src="../JS/GenerateTable.js" type="text/javascript" charset="utf-8"></script>
		<script src="../JS/aws-cognito.js"></script>
		<script src="https://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
		<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
		<script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
		<script type="text/javascript">
		   (function(){
			  emailjs.init("user_dNUTnHrGIx2yGv4lkBnqw");
		   })();
		</script>
	</head>
	
	<body id="bookingsBody">
		<div id="navBar"></div>
		<p id="welcomeMsg">Welcome:</p>
		<div id="imgnHeaderDiv">
			<center><em><h1 style="font-weight:300;">[Click on a room to book it]</h1></em></center>
			<img src="../Img/se21 layout.png" id="frontPageMap" border="3px">
		</div>
		<div id="mapBtnsDiv">
			<div onClick="openModal('Tech 1'); loadinTech1();" id="Tech1Btn"></div>
			<div onClick="openModal('Tech 2');" id="Tech2Btn"></div>
			<div onClick="openModal('Tech 3');" id="Tech3Btn"></div>
			<div onClick="openModal('Tech 4');" id="Tech4Btn"></div>
			<div onClick="openModal('Tech 5');" id="Tech5Btn"></div>
			<div onClick="openModal('Reception & VR');" id="VRBtn"></div>
		</div>
		
		<div id="timeTableModal" class="modal">
		  <div class="timeTableModal-content">
			<span class="close">&times;</span>	
				<h3 id="timeTableTitle">Timetable:</h3>
				
				<div id="viewPort">
					<div id="viewPort_Content">
						<strong><label>Details:</label></strong>
						<div class="indent">
							<label id="bookingDetails">.......</label>
							<br class="noHeightBreak">
							<label style="margin-left: 6px;">Current Status:</label>&nbsp;
							<label id="bookingStatus">.......</label>
						</div>
						<br>					
						<button id="bookBtn">Book</button>
						<button id="deleteBtn">Delete</button>
						<button id="contactBtn">Contact</button>
					</div>	
					<div id="preLimLoader">
						<em><p id="preLimLoaderText">[Click on a Timeslot to View Bookings]</p></em>
					</div>
				</div>
				
				<div id="timeTable"></div>
				
				<div id="Loader">
					<img width="30%" src="../Img/copper-loader.gif">
				</div>
		  </div>
		</div>
		
		
		<div id="emailModal" class="HigherModal">
			<div class="emailModal-content">
				<span class="close1">&times;</span>
				<input disabled type="email" id="toEmail"><br>
				<input placeHolder="Subject" type="text" id="subject">
				<textarea id="emailText"></textarea>
				<button id="sendBtn">Send</button>
				<p id="emailErrMsg"></p>
			</div>
		</div>
		
	</body>
	
	<script>//Initlizers
		$("#navBar").load("../DynamicLoad_Modules/NavBar.html")
		/*window.setTimeout(function(){
			$("#Loader").fadeOut(1000, "swing")
		},2000)*/
		getEmail()
		checkVariable()
		function checkVariable()  // welcomeMsg Loader
		{
			if (email != null) 
			{
			   $("#welcomeMsg").html("Welcome: " + email)
		   	}
			else
			{
				setTimeout(checkVariable, 1000);
			}
		}

		 
		$("#welcomeMsg")
	</script>
	<script> //Timetable Modal Code
		var modal = document.getElementById('timeTableModal');
		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];

		// When the user clicks on the button, open the modal 
		function openModal(whichTech) {
			modal.style.display = "block";
			$("#timeTableTitle").html(whichTech+" Timetable:")
		}
		// When the user clicks on <span> (x), close the modal
		span.onclick = function() {
			modal.style.display = "none";
		}
	</script>
	<script>//email Modal Code
		var emailmodal = document.getElementById('emailModal');
		var openEmailbtn = document.getElementById("contactBtn");
		var span1 = document.getElementsByClassName("close1")[0];
		
		openEmailbtn.onclick = function() {
			//modal.style.display = "none";
			emailmodal.style.display = "block";
			
		}
		
		// When the user clicks on <span> (x), close the modal
		span1.onclick = function() {
			emailmodal.style.display = "none";
		}	
	</script>
	
</html>
